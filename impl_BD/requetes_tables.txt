--ACESS

--Get the nom of all the players

SELECT nom, prenom from Joueur

--Get all the boats in a match

SELECT idBateau from Bateau where idPartie = idPartie --(desired)

--Get the name of a determined boat in a determined match

SELECT nom, prenom from Bateau NATURAL JOIN Joueur where idBateau = x and idPartie = y

--Get all the action of a match

SELECT idAction from Action natural join ActionDeplacement natural join ActionTir where idPartie = x

--Get the actions of a turn

SELECT idAction from Action natural join ActionDeplacement natural join ActionTir where idPartie = x and tour = y

-- Find the winner of a match

SELECT pseudo from Vainqueurs WHERE idPartie = x

-- Find all the matches played by a player

SELECT idPartie from JoueursParPartie

-- Find the two players of a match

SELECT pseudo from JoueursParPartie where IdPartie = x 

-- Get all observable matches header 
        --Partie without winner.
        SELECT Partie.idPartie, Date, joueur1.pseudo as pseudo1, joueur2.pseudo as pseudo2
        FROM JoueursPartie joueur1, JoueursPartie joueur2, Partie
        WHERE joueur1.pseudo !> userPseudo
        AND joueur2.pseudo !> userPseudo
        AND joueur1.idPartie = Partie.idPartie
        AND joueur2.idPartie = Partie.idPartie
        AND joueur1.numJoueur = 1
        AND joueur2.numJoueur = 2
        AND NOT EXISTS (SELECT * FROM Vainqueurs v  
                        WHERE v.idPartie = Partie.idPartie) 

        --Partie with winner
        SELECT Partie.idPartie, Partie.Date, joueur1.pseudo as pseudo1,
        joueur2.pseudo as pseudo2, Vainqueurs.pseudo
        FROM JoueursPartie joueur1, JoueursPartie joueur2, Vainqueurs, Partie
        WHERE joueur1.idPartie = Partie.idPartie
        AND joueur2.idPartie = Partie.idPartie
        AND Vainqueurs.idPartie = Partie.idPartie
        AND joueur1.numJoueur = 1
        AND joueur2.numJoueur = 2
        
-- Get all playable matches header.

        SELECT Partie.idPartie, Partie.dateDemarrage, joueur1.pseudo as pseudo1,
        joueur2.pseudo as pseudo2
        FROM JoueursPartie joueur1, JoueursPartie joueur2, Partie
        WHERE joueur1.idPartie = Partie.idPartie
        AND joueur2.idPartie = Partie.idPartie and
        AND joueur1.numJoueur = 1
        AND joueur2.numJoueur = 2
        AND (joueur1.pseudo = ? OR joueur2.pseudo = ?)
        AND NOT EXISTS (SELECT * FROM Vainqueurs 
                        WHERE Vainqueurs.idPartie = Partie.idPartie)

-- INSERTION

-- Create new match :

    First step :
        INSERT INTO Partie (idPartie, dateDemarage) values (?,?);
    Second step :
        INSERT INTO JoueursPartie (pseudo, idPartie) values (?,?);
    Third step :
        INSERT INTO JoueursPartie (pseudo, idPartie) values (?,?);
